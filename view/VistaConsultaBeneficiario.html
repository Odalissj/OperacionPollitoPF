<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pollitos • Consulta de Beneficiarios</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../css/index.css" />
  <link rel="stylesheet" href="../css/navbar.css" />
</head>
<body data-page="bene-consulta">
  <!-- NAVBAR unificada -->
  <header data-include="/view/partials/navbar.html"></header>

  <main class="container py-4">
    <div class="mb-4">
      <h2 class="fw-bold text-primary">
        <i class="bi bi-people me-2"></i>Consulta de Beneficiarios
      </h2>
    </div>

    <!-- Filtros -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <form id="formFiltro" class="row g-3 align-items-end">
          <div class="col-md-4">
            <label class="form-label">Nombre / Apellido contiene</label>
            <input type="text" id="filtroNombre" class="form-control" placeholder="Ej. Juan, Pérez">
          </div>
          <div class="col-md-3">
            <label class="form-label">Estado</label>
            <select id="filtroEstado" class="form-select">
              <option value="">Todos</option>
              <option value="A">Activos</option>
              <option value="I">Inactivos</option>
            </select>
          </div>
          <div class="col-auto">
            <button type="submit" class="btn btn-primary">
              <i class="bi bi-search"></i> Buscar
            </button>
          </div>
          <div class="col-auto">
            <button type="button" id="btnLimpiar" class="btn btn-outline-secondary">
              <i class="bi bi-x-circle"></i> Limpiar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Tabla -->
    <div class="card shadow-sm">
      <div class="card-header bg-primary text-white">
        <i class="bi bi-list-ul me-2"></i>Listado de beneficiarios
      </div>
      <div class="card-body table-responsive">
        <table class="table table-hover align-middle" id="tablaBeneficiarios">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Nombre completo</th>
              <th>Ubicación</th>
              <th>Encargado (ID)</th>
              <th>Estado</th>
              <th>Ingreso</th>
              <th>Últ. actualización</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr class="text-muted text-center">
              <td colspan="8">
                <i class="bi bi-hourglass-split me-2"></i>
                Cargando datos desde el servidor...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- MODAL DETALLE SOLO LECTURA -->
  <div class="modal fade" id="modalDetalleBene" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-person-badge me-2"></i>Detalle del beneficiario
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form class="row g-3">
            <div class="col-md-3">
              <label class="form-label">ID</label>
              <input id="detId" class="form-control" disabled>
            </div>

            <div class="col-md-3">
              <label class="form-label">Primer nombre</label>
              <input id="detNom1" class="form-control" disabled>
            </div>
            <div class="col-md-3">
              <label class="form-label">Segundo nombre</label>
              <input id="detNom2" class="form-control" disabled>
            </div>
            <div class="col-md-3">
              <label class="form-label">Tercer nombre</label>
              <input id="detNom3" class="form-control" disabled>
            </div>

            <div class="col-md-3">
              <label class="form-label">Primer apellido</label>
              <input id="detApe1" class="form-control" disabled>
            </div>
            <div class="col-md-3">
              <label class="form-label">Segundo apellido</label>
              <input id="detApe2" class="form-control" disabled>
            </div>
            <div class="col-md-3">
              <label class="form-label">Tercer apellido</label>
              <input id="detApe3" class="form-control" disabled>
            </div>

            <div class="col-md-3">
              <label class="form-label">Estado</label>
              <input id="detEstado" class="form-control" disabled>
            </div>

            <div class="col-md-3">
              <label class="form-label">País (ID)</label>
              <input id="detPais" class="form-control" disabled>
            </div>
            <div class="col-md-3">
              <label class="form-label">Depto (ID)</label>
              <input id="detDepto" class="form-control" disabled>
            </div>
            <div class="col-md-3">
              <label class="form-label">Municipio (ID)</label>
              <input id="detMuni" class="form-control" disabled>
            </div>

            <div class="col-md-4">
              <label class="form-label">Lugar (ID)</label>
              <input id="detLugar" class="form-control" disabled>
            </div>
            <div class="col-md-4">
              <label class="form-label">Encargado (ID)</label>
              <input id="detEncargado" class="form-control" disabled>
            </div>
            <div class="col-md-4">
              <label class="form-label">Usuario ingreso (ID)</label>
              <input id="detUsrIng" class="form-control" disabled>
            </div>

            <div class="col-md-4">
              <label class="form-label">Fecha ingreso</label>
              <input id="detFIng" class="form-control" disabled>
            </div>
            <div class="col-md-4">
              <label class="form-label">Hora ingreso</label>
              <input id="detHIng" class="form-control" disabled>
            </div>
            <div class="col-md-4">
              <label class="form-label">Usuario actualiza (ID)</label>
              <input id="detUsrAct" class="form-control" disabled>
            </div>

            <div class="col-md-6">
              <label class="form-label">Fecha actualización</label>
              <input id="detFAct" class="form-control" disabled>
            </div>
            <div class="col-md-6">
              <label class="form-label">Hora actualización</label>
              <input id="detHAct" class="form-control" disabled>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <div data-include="/view/partials/footer.html"></div>

  <script src="/js/include.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/auth.js"></script>
  <script src="../js/ConsultaBeneficiarios.js"></script>
  <script src="../js/CargaUsuarios.js"></script>

</body>
</html>
